{"version":3,"sources":["TextInput.js"],"names":["BLUR_ANIMATION_DURATION","FOCUS_ANIMATION_DURATION","TextInput","arguments","state","labeled","Animated","Value","props","value","undefined","defaultValue","error","focused","placeholder","labelLayout","measured","width","height","showPlaceholder","timer","clearTimeout","setTimeout","setState","hidePlaceholder","showError","scale","theme","animation","timing","toValue","duration","useNativeDriver","Platform","select","ios","default","start","hideError","restoreLabel","minimizeLabel","handleFocus","args","disabled","editable","onFocus","handleBlur","onBlur","handleChangeText","onChangeText","handleLayoutAnimatedText","e","nativeEvent","layout","prevProps","prevState","label","root","setNativeProps","isFocused","clear","focus","blur","mode","rest","React","createElement","TextInputOutlined","parentState","innerRef","ref","onLayoutAnimatedText","TextInputFlat","nextProps","Component","defaultProps","dense","multiline","render","NativeTextInput"],"mappings":"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","sourcesContent":["import * as React from 'react';\nimport { Animated, TextInput as NativeTextInput, Platform, } from 'react-native';\nimport TextInputOutlined from './TextInputOutlined';\nimport TextInputFlat from './TextInputFlat';\nimport { withTheme } from '../../core/theming';\nconst BLUR_ANIMATION_DURATION = 180;\nconst FOCUS_ANIMATION_DURATION = 150;\n/**\n * A component to allow users to input text.\n *\n * <div class=\"screenshots\">\n *   <figure>\n *     <img class=\"medium\" src=\"screenshots/textinput-flat.focused.png\" />\n *     <figcaption>Flat (focused)</figcaption>\n *   </figure>\n *   <figure>\n *     <img class=\"medium\" src=\"screenshots/textinput-flat.disabled.png\" />\n *     <figcaption>Flat (disabled)</figcaption>\n *   </figure>\n *   <figure>\n *     <img class=\"medium\" src=\"screenshots/textinput-outlined.focused.png\" />\n *     <figcaption>Outlined (focused)</figcaption>\n *   </figure>\n *   <figure>\n *     <img class=\"medium\" src=\"screenshots/textinput-outlined.disabled.png\" />\n *     <figcaption>Outlined (disabled)</figcaption>\n *   </figure>\n * </div>\n *\n * ## Usage\n * ```js\n * import * as React from 'react';\n * import { TextInput } from 'react-native-paper';\n *\n * export default class MyComponent extends React.Component {\n *   state = {\n *     text: ''\n *   };\n *\n *   render(){\n *     return (\n *       <TextInput\n *         label='Email'\n *         value={this.state.text}\n *         onChangeText={text => this.setState({ text })}\n *       />\n *     );\n *   }\n * }\n * ```\n *\n * @extends TextInput props https://facebook.github.io/react-native/docs/textinput.html#props\n */\nlet TextInput = /** @class */ (() => {\n    class TextInput extends React.Component {\n        constructor() {\n            super(...arguments);\n            this.state = {\n                labeled: new Animated.Value((this.props.value !== undefined\n                    ? this.props.value\n                    : this.props.defaultValue)\n                    ? 0\n                    : 1),\n                error: new Animated.Value(this.props.error ? 1 : 0),\n                focused: false,\n                placeholder: '',\n                value: this.props.value !== undefined\n                    ? this.props.value\n                    : this.props.defaultValue,\n                labelLayout: {\n                    measured: false,\n                    width: 0,\n                    height: 0,\n                },\n            };\n            this.showPlaceholder = () => {\n                if (this.timer) {\n                    clearTimeout(this.timer);\n                }\n                // Set the placeholder in a delay to offset the label animation\n                // If we show it immediately, they'll overlap and look ugly\n                // @ts-ignore\n                this.timer = setTimeout(() => this.setState({\n                    placeholder: this.props.placeholder,\n                }), 50);\n            };\n            this.hidePlaceholder = () => this.setState({\n                placeholder: '',\n            });\n            this.showError = () => {\n                const { scale } = this.props.theme.animation;\n                Animated.timing(this.state.error, {\n                    toValue: 1,\n                    duration: FOCUS_ANIMATION_DURATION * scale,\n                    // To prevent this - https://github.com/callstack/react-native-paper/issues/941\n                    useNativeDriver: Platform.select({\n                        ios: false,\n                        default: true,\n                    }),\n                }).start(this.showPlaceholder);\n            };\n            this.hideError = () => {\n                const { scale } = this.props.theme.animation;\n                Animated.timing(this.state.error, {\n                    toValue: 0,\n                    duration: BLUR_ANIMATION_DURATION * scale,\n                    // To prevent this - https://github.com/callstack/react-native-paper/issues/941\n                    useNativeDriver: Platform.select({\n                        ios: false,\n                        default: true,\n                    }),\n                }).start();\n            };\n            this.restoreLabel = () => {\n                const { scale } = this.props.theme.animation;\n                Animated.timing(this.state.labeled, {\n                    toValue: 1,\n                    duration: FOCUS_ANIMATION_DURATION * scale,\n                    // To prevent this - https://github.com/callstack/react-native-paper/issues/941\n                    useNativeDriver: Platform.select({\n                        ios: false,\n                        default: true,\n                    }),\n                }).start();\n            };\n            this.minimizeLabel = () => {\n                const { scale } = this.props.theme.animation;\n                Animated.timing(this.state.labeled, {\n                    toValue: 0,\n                    duration: BLUR_ANIMATION_DURATION * scale,\n                    // To prevent this - https://github.com/callstack/react-native-paper/issues/941\n                    useNativeDriver: Platform.select({\n                        ios: false,\n                        default: true,\n                    }),\n                }).start();\n            };\n            this.handleFocus = (args) => {\n                if (this.props.disabled || !this.props.editable) {\n                    return;\n                }\n                this.setState({ focused: true });\n                if (this.props.onFocus) {\n                    this.props.onFocus(args);\n                }\n            };\n            this.handleBlur = (args) => {\n                if (this.props.disabled || !this.props.editable) {\n                    return;\n                }\n                this.setState({ focused: false });\n                if (this.props.onBlur) {\n                    this.props.onBlur(args);\n                }\n            };\n            this.handleChangeText = (value) => {\n                if (!this.props.editable) {\n                    return;\n                }\n                this.setState({ value });\n                this.props.onChangeText && this.props.onChangeText(value);\n            };\n            this.handleLayoutAnimatedText = (e) => {\n                this.setState({\n                    labelLayout: {\n                        width: e.nativeEvent.layout.width,\n                        height: e.nativeEvent.layout.height,\n                        measured: true,\n                    },\n                });\n            };\n        }\n        static getDerivedStateFromProps(nextProps, prevState) {\n            return {\n                value: typeof nextProps.value !== 'undefined'\n                    ? nextProps.value\n                    : prevState.value,\n            };\n        }\n        componentDidUpdate(prevProps, prevState) {\n            if (prevState.focused !== this.state.focused ||\n                prevState.value !== this.state.value ||\n                // workaround for animated regression for react native > 0.61\n                // https://github.com/callstack/react-native-paper/pull/1440\n                prevState.labelLayout !== this.state.labelLayout) {\n                // The label should be minimized if the text input is focused, or has text\n                // In minimized mode, the label moves up and becomes small\n                if (this.state.value || this.state.focused) {\n                    this.minimizeLabel();\n                }\n                else {\n                    this.restoreLabel();\n                }\n            }\n            if (prevState.focused !== this.state.focused ||\n                prevProps.label !== this.props.label) {\n                // Show placeholder text only if the input is focused, or there's no label\n                // We don't show placeholder if there's a label because the label acts as placeholder\n                // When focused, the label moves up, so we can show a placeholder\n                if (this.state.focused || !this.props.label) {\n                    this.showPlaceholder();\n                }\n                else {\n                    this.hidePlaceholder();\n                }\n            }\n            if (prevProps.error !== this.props.error) {\n                // When the input has an error, we wiggle the label and apply error styles\n                if (this.props.error) {\n                    this.showError();\n                }\n                else {\n                    this.hideError();\n                }\n            }\n        }\n        componentWillUnmount() {\n            if (this.timer) {\n                clearTimeout(this.timer);\n            }\n        }\n        /**\n         * @internal\n         */\n        setNativeProps(args) {\n            return this.root && this.root.setNativeProps(args);\n        }\n        /**\n         * Returns `true` if the input is currently focused, `false` otherwise.\n         */\n        isFocused() {\n            return this.root && this.root.isFocused();\n        }\n        /**\n         * Removes all text from the TextInput.\n         */\n        clear() {\n            return this.root && this.root.clear();\n        }\n        /**\n         * Focuses the input.\n         */\n        focus() {\n            return this.root && this.root.focus();\n        }\n        /**\n         * Removes focus from the input.\n         */\n        blur() {\n            return this.root && this.root.blur();\n        }\n        render() {\n            const { mode, ...rest } = this.props;\n            return mode === 'outlined' ? (React.createElement(TextInputOutlined, Object.assign({}, rest, { value: this.state.value, parentState: this.state, innerRef: ref => {\n                    this.root = ref;\n                }, onFocus: this.handleFocus, onBlur: this.handleBlur, onChangeText: this.handleChangeText, onLayoutAnimatedText: this.handleLayoutAnimatedText }))) : (React.createElement(TextInputFlat, Object.assign({}, rest, { value: this.state.value, parentState: this.state, innerRef: ref => {\n                    this.root = ref;\n                }, onFocus: this.handleFocus, onBlur: this.handleBlur, onChangeText: this.handleChangeText, onLayoutAnimatedText: this.handleLayoutAnimatedText })));\n        }\n    }\n    TextInput.defaultProps = {\n        mode: 'flat',\n        dense: false,\n        disabled: false,\n        error: false,\n        multiline: false,\n        editable: true,\n        render: (props) => React.createElement(NativeTextInput, Object.assign({}, props)),\n    };\n    return TextInput;\n})();\nexport default withTheme(TextInput);\n"]}